<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
  <link rel="stylesheet" href="css/main.css">
    <title>Mostrar archivo cpp</title>
  </head>

 

  <body style="background-color:rgb(235, 235, 235);">
    <h1>Gestion de archivo cpp </h1>
    <hr />
    <b>Gleyner ospino,Gabriel candelario</b>
    <hr />
    <h2>Seleccionar para mostrar inmediatamente</h2>
    <p>Selecciona el archivo a mostrar</p>
    <input type="file" id="archivo1" />
    <h4>Contenido en lista</h4>
    <hr />
    <ul id="lista">

 

    </ul>

 

    <script>
      /**
       * Leer y mostrar contenido inmediatamente
       **/

 

      function mostrarContenido(contenido) {
        contenido = contenido.replace(/(\/\*\s*.*\s*\*\/|\/\/.*|\\\w)/g, "");
        contenido = contenido.replace(/\s+/gm, " ");
        console.log(contenido)
       
        var array = [];
        array = contenido.split(/(\=\=|\<\<|\>\>|\+\+|\W|\s+)/gm);

 

        var salida = [];

 

        array.forEach((element) => {
          if (element != "") {
            salida.push(element);
          }
        });

 

        salida.forEach((data) => {
          agreagarLi(data);
        });
      }

 

      function agreagarLi(data) {
        var li = document.createElement("LI");
        li.innerHTML = data;
        document.getElementById("lista").appendChild(li);
      }

 

      function leerArchivo(e) {
        var archivo = e.target.files[0];
        console.log(archivo);
        if (!archivo) {
          return;
        }
        const lector = new FileReader();
        lector.onload = function (e) {
          var contenido = e.target.result;
          mostrarContenido(contenido);
        };
        lector.readAsText(archivo);
      }

 

      document.querySelector("#archivo1").addEventListener("click", async () => {
        var lista = document.getElementById("lista");   
          await lista.childNodes.forEach(element => {
            lista.replaceChildren(element);
          });
        
      });

 

      document
        .querySelector("#archivo1")
        .addEventListener("change", leerArchivo, false);
    </script>
    <style>
      li{
        list-style:none;
      }
    </style>
  </body>
</html>